<% if @presenter.lat %>
<!-- if there is a valid map -->

<script>
  const lat = <%= @presenter.lat %>;
  const lng = <%= @presenter.lng %>;
  const ne_lat = <%= @presenter.ne_lat %>;
  const ne_lng = <%= @presenter.ne_lng %>;
  const sw_lat = <%= @presenter.sw_lat %>;
  const sw_lng = <%= @presenter.sw_lng %>;
  const title = "<%= @presenter.map_name %>"
  const geoUnit = "<%= @presenter.geo_unit %>"

  var card1Items = [];
  var card2Items = [];
  var card3Items = [];

  <% @presenter.card1.each do |location| %>
    card1Items.push("<%= location.name %>")
    console.log(location);
  <% end %>
  var card1Title = "<%= @presenter.card1.title %>"

  <% @presenter.card2.each do |location| %>
    card2Items.push("<%= location.name %>")
  <% end %>
  var card2Title = "<%= @presenter.card2.title %>"

  <% @presenter.card3.each do |location| %>
    card3Items.push("<%= location.name %>")
  <% end %>
  var card3Title = "<%= @presenter.card3.title %>"

</script>

<%= javascript_include_tag 'maps' %>
<%= javascript_include_tag "https://maps.googleapis.com/maps/api/js?key=#{Rails.application.credentials.google[:api_key]}&callback=initMap", async: true, defer: true %>
<% else %>
  <!-- if no valid map -->
  <script>
    const map = document.querySelector("#map")
    map.style.display = 'hidden'
  </script>
<% end %>
